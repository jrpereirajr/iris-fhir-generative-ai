<!DOCTYPE html>
<html>
    <head>
        <title>FHIREasy AI</title>
        <link rel="stylesheet" href="style.css">
        <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200" />

        <!-- Font -->
        <link href='https://fonts.googleapis.com/css?family=Raleway' rel='stylesheet'>
        <link href='https://fonts.googleapis.com/css?family=Roboto' rel='stylesheet'>
        <script src="https://cdn.tailwindcss.com"></script>
        <script src="https://cdn.jsdelivr.net/gh/khushit-shah/WriteIt.js@latest/WriteIt.min.js"></script>
        
    </head>
    <body class="d-flex align-items-center">
        <div class="d-flex w-75 mx-auto chat-wrapper mat-card dash-card p-0">
            <div class="message-section w-100 d-flex flex-column justify-content-between">
                <div class="chat-header d-flex flex-column position-sticky w-100">
                    <div class="d-flex align-items-center justify-content-between px-4 py-2 chat-top">
                        <div class="ml-2 active-user-chat">
                            <div><img src="logo.png" alt="" style="display: inline-block;"> </div>
                            <div>IRIS FHIR Easy Generative AI</div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="msg-container">
                <div class="msg-received">Welcome to FHIREasy, how can I help you?</div>
            </div>

        </div>
        <div class="d-flex align-items-center justify-content-between px-4 py-3 chat-top">
            <div class="flex-column">
                <input type="search" class="message-input w-100" placeholder="Type your question here..." >
                <span class="material-symbols-outlined">send</span>
            </div>
        </div>

    </body>
    <script>

        const sendPrompt = async () => {
            const prompt = document.querySelector('.message-input'),
                container = document.querySelector('.msg-container');
            if (!!!prompt.value) return;
            const value = prompt.value,
                message = document.createElement('div');
            prompt.value = '';
            message.classList.add('msg-sent');
            container.appendChild(message);
            message.textContent = value;
            const resp = await fetch('https://swapi.dev/api/starships/9/', {method: 'GET'})
            .then( response => {
                return response.json()
            })

            const receive = document.createElement('div');
            receive.classList.add('msg-received');
            receive.id = crypto.randomUUID();
            receive.setAttribute('writeit-animate', "");
            receive.setAttribute('writeit-speed', 20)
            receive.setAttribute('writeit-char', "_");
            receive.textContent = resp.manufacturer;
            container.appendChild(receive);
        }

        const typewriter = (input, text) => {
            if (!!!text) return
            text = text.split('');
            input.innerHTML += text.shift();
            text = text.join('');

            setTimeout(typeWriter, 175);
        }

        window.onload = event => {
            const prompt = document.querySelector('.message-input');
            prompt.onkeydown = e => {
                if (e.key === "Enter") {
                    sendPrompt();
                }
            }

            document.querySelector('.material-symbols-outlined').addEventListener('click', e => {
                sendPrompt();
            })
    
        };
    </script>
</html>